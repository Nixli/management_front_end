{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.legend = legend;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\nvar _updater = require(\"../class/updater.class\");\nvar _util = require(\"@jiaminghi/c-render/lib/plugin/util\");\nvar _config = require(\"../config\");\nvar _util2 = require(\"../util\");\nfunction legend(chart) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var legend = option.legend;\n  if (legend) {\n    legend = (0, _util2.deepMerge)((0, _util.deepClone)(_config.legendConfig, true), legend);\n    legend = initLegendData(legend);\n    legend = filterInvalidData(legend, option, chart);\n    legend = calcLegendTextWidth(legend, chart);\n    legend = calcLegendPosition(legend, chart);\n    legend = [legend];\n  } else {\n    legend = [];\n  }\n  (0, _updater.doUpdate)({\n    chart: chart,\n    series: legend,\n    key: 'legendIcon',\n    getGraphConfig: getIconConfig\n  });\n  (0, _updater.doUpdate)({\n    chart: chart,\n    series: legend,\n    key: 'legendText',\n    getGraphConfig: getTextConfig\n  });\n}\nfunction initLegendData(legend) {\n  var data = legend.data;\n  legend.data = data.map(function (item) {\n    var itemType = (0, _typeof2[\"default\"])(item);\n    if (itemType === 'string') {\n      return {\n        name: item\n      };\n    } else if (itemType === 'object') {\n      return item;\n    }\n    return {\n      name: ''\n    };\n  });\n  return legend;\n}\nfunction filterInvalidData(legend, option, chart) {\n  var series = option.series;\n  var legendStatus = chart.legendStatus;\n  var data = legend.data.filter(function (item) {\n    var name = item.name;\n    var result = series.find(function (_ref) {\n      var sn = _ref.name;\n      return name === sn;\n    });\n    if (!result) return false;\n    if (!item.color) item.color = result.color;\n    if (!item.icon) item.icon = result.type;\n    return item;\n  });\n  if (!legendStatus || legendStatus.length !== legend.data.length) legendStatus = new Array(legend.data.length).fill(true);\n  data.forEach(function (item, i) {\n    return item.status = legendStatus[i];\n  });\n  legend.data = data;\n  chart.legendStatus = legendStatus;\n  return legend;\n}\nfunction calcLegendTextWidth(legend, chart) {\n  var ctx = chart.render.ctx;\n  var data = legend.data,\n    textStyle = legend.textStyle,\n    textUnselectedStyle = legend.textUnselectedStyle;\n  data.forEach(function (item) {\n    var status = item.status,\n      name = item.name;\n    item.textWidth = getTextWidth(ctx, name, status ? textStyle : textUnselectedStyle);\n  });\n  return legend;\n}\nfunction getTextWidth(ctx, text, style) {\n  ctx.font = getFontConfig(style);\n  return ctx.measureText(text).width;\n}\nfunction getFontConfig(style) {\n  var fontFamily = style.fontFamily,\n    fontSize = style.fontSize;\n  return \"\".concat(fontSize, \"px \").concat(fontFamily);\n}\nfunction calcLegendPosition(legend, chart) {\n  var orient = legend.orient;\n  if (orient === 'vertical') {\n    calcVerticalPosition(legend, chart);\n  } else {\n    calcHorizontalPosition(legend, chart);\n  }\n  return legend;\n}\nfunction calcHorizontalPosition(legend, chart) {\n  var iconHeight = legend.iconHeight,\n    itemGap = legend.itemGap;\n  var lines = calcDefaultHorizontalPosition(legend, chart);\n  var xOffsets = lines.map(function (line) {\n    return getHorizontalXOffset(line, legend, chart);\n  });\n  var yOffset = getHorizontalYOffset(legend, chart);\n  var align = {\n    textAlign: 'left',\n    textBaseline: 'middle'\n  };\n  lines.forEach(function (line, i) {\n    return line.forEach(function (item) {\n      var iconPosition = item.iconPosition,\n        textPosition = item.textPosition;\n      var xOffset = xOffsets[i];\n      var realYOffset = yOffset + i * (itemGap + iconHeight);\n      item.iconPosition = mergeOffset(iconPosition, [xOffset, realYOffset]);\n      item.textPosition = mergeOffset(textPosition, [xOffset, realYOffset]);\n      item.align = align;\n    });\n  });\n}\nfunction calcDefaultHorizontalPosition(legend, chart) {\n  var data = legend.data,\n    iconWidth = legend.iconWidth;\n  var w = chart.render.area[0];\n  var startIndex = 0;\n  var lines = [[]];\n  data.forEach(function (item, i) {\n    var beforeWidth = getBeforeWidth(startIndex, i, legend);\n    var endXPos = beforeWidth + iconWidth + 5 + item.textWidth;\n    if (endXPos >= w) {\n      startIndex = i;\n      beforeWidth = getBeforeWidth(startIndex, i, legend);\n      lines.push([]);\n    }\n    item.iconPosition = [beforeWidth, 0];\n    item.textPosition = [beforeWidth + iconWidth + 5, 0];\n    lines.slice(-1)[0].push(item);\n  });\n  return lines;\n}\nfunction getBeforeWidth(startIndex, currentIndex, legend) {\n  var data = legend.data,\n    iconWidth = legend.iconWidth,\n    itemGap = legend.itemGap;\n  var beforeItem = data.slice(startIndex, currentIndex);\n  return (0, _util2.mulAdd)(beforeItem.map(function (_ref2) {\n    var textWidth = _ref2.textWidth;\n    return textWidth;\n  })) + (currentIndex - startIndex) * (itemGap + 5 + iconWidth);\n}\nfunction getHorizontalXOffset(data, legend, chart) {\n  var left = legend.left,\n    right = legend.right,\n    iconWidth = legend.iconWidth,\n    itemGap = legend.itemGap;\n  var w = chart.render.area[0];\n  var dataNum = data.length;\n  var allWidth = (0, _util2.mulAdd)(data.map(function (_ref3) {\n    var textWidth = _ref3.textWidth;\n    return textWidth;\n  })) + dataNum * (5 + iconWidth) + (dataNum - 1) * itemGap;\n  var horizontal = [left, right].findIndex(function (pos) {\n    return pos !== 'auto';\n  });\n  if (horizontal === -1) {\n    return (w - allWidth) / 2;\n  } else if (horizontal === 0) {\n    if (typeof left === 'number') return left;\n    return parseInt(left) / 100 * w;\n  } else {\n    if (typeof right !== 'number') right = parseInt(right) / 100 * w;\n    return w - (allWidth + right);\n  }\n}\nfunction getHorizontalYOffset(legend, chart) {\n  var top = legend.top,\n    bottom = legend.bottom,\n    iconHeight = legend.iconHeight;\n  var h = chart.render.area[1];\n  var vertical = [top, bottom].findIndex(function (pos) {\n    return pos !== 'auto';\n  });\n  var halfIconHeight = iconHeight / 2;\n  if (vertical === -1) {\n    var _chart$gridArea = chart.gridArea,\n      y = _chart$gridArea.y,\n      height = _chart$gridArea.h;\n    return y + height + 45 - halfIconHeight;\n  } else if (vertical === 0) {\n    if (typeof top === 'number') return top - halfIconHeight;\n    return parseInt(top) / 100 * h - halfIconHeight;\n  } else {\n    if (typeof bottom !== 'number') bottom = parseInt(bottom) / 100 * h;\n    return h - bottom - halfIconHeight;\n  }\n}\nfunction mergeOffset(_ref4, _ref5) {\n  var _ref6 = (0, _slicedToArray2[\"default\"])(_ref4, 2),\n    x = _ref6[0],\n    y = _ref6[1];\n  var _ref7 = (0, _slicedToArray2[\"default\"])(_ref5, 2),\n    ox = _ref7[0],\n    oy = _ref7[1];\n  return [x + ox, y + oy];\n}\nfunction calcVerticalPosition(legend, chart) {\n  var _getVerticalXOffset = getVerticalXOffset(legend, chart),\n    _getVerticalXOffset2 = (0, _slicedToArray2[\"default\"])(_getVerticalXOffset, 2),\n    isRight = _getVerticalXOffset2[0],\n    xOffset = _getVerticalXOffset2[1];\n  var yOffset = getVerticalYOffset(legend, chart);\n  calcDefaultVerticalPosition(legend, isRight);\n  var align = {\n    textAlign: 'left',\n    textBaseline: 'middle'\n  };\n  legend.data.forEach(function (item) {\n    var textPosition = item.textPosition,\n      iconPosition = item.iconPosition;\n    item.textPosition = mergeOffset(textPosition, [xOffset, yOffset]);\n    item.iconPosition = mergeOffset(iconPosition, [xOffset, yOffset]);\n    item.align = align;\n  });\n}\nfunction getVerticalXOffset(legend, chart) {\n  var left = legend.left,\n    right = legend.right;\n  var w = chart.render.area[0];\n  var horizontal = [left, right].findIndex(function (pos) {\n    return pos !== 'auto';\n  });\n  if (horizontal === -1) {\n    return [true, w - 10];\n  } else {\n    var offset = [left, right][horizontal];\n    if (typeof offset !== 'number') offset = parseInt(offset) / 100 * w;\n    return [Boolean(horizontal), offset];\n  }\n}\nfunction getVerticalYOffset(legend, chart) {\n  var iconHeight = legend.iconHeight,\n    itemGap = legend.itemGap,\n    data = legend.data,\n    top = legend.top,\n    bottom = legend.bottom;\n  var h = chart.render.area[1];\n  var dataNum = data.length;\n  var allHeight = dataNum * iconHeight + (dataNum - 1) * itemGap;\n  var vertical = [top, bottom].findIndex(function (pos) {\n    return pos !== 'auto';\n  });\n  if (vertical === -1) {\n    return (h - allHeight) / 2;\n  } else {\n    var offset = [top, bottom][vertical];\n    if (typeof offset !== 'number') offset = parseInt(offset) / 100 * h;\n    if (vertical === 1) offset = h - offset - allHeight;\n    return offset;\n  }\n}\nfunction calcDefaultVerticalPosition(legend, isRight) {\n  var data = legend.data,\n    iconWidth = legend.iconWidth,\n    iconHeight = legend.iconHeight,\n    itemGap = legend.itemGap;\n  var halfIconHeight = iconHeight / 2;\n  data.forEach(function (item, i) {\n    var textWidth = item.textWidth;\n    var yPos = (iconHeight + itemGap) * i + halfIconHeight;\n    var iconXPos = isRight ? 0 - iconWidth : 0;\n    var textXpos = isRight ? iconXPos - 5 - textWidth : iconWidth + 5;\n    item.iconPosition = [iconXPos, yPos];\n    item.textPosition = [textXpos, yPos];\n  });\n}\nfunction getIconConfig(legendItem, updater) {\n  var data = legendItem.data,\n    selectAble = legendItem.selectAble,\n    animationCurve = legendItem.animationCurve,\n    animationFrame = legendItem.animationFrame,\n    rLevel = legendItem.rLevel;\n  return data.map(function (item, i) {\n    return (0, _defineProperty2[\"default\"])({\n      name: item.icon === 'line' ? 'lineIcon' : 'rect',\n      index: rLevel,\n      visible: legendItem.show,\n      hover: selectAble,\n      click: selectAble,\n      animationCurve: animationCurve,\n      animationFrame: animationFrame,\n      shape: getIconShape(legendItem, i),\n      style: getIconStyle(legendItem, i)\n    }, \"click\", createClickCallBack(legendItem, i, updater));\n  });\n}\nfunction getIconShape(legendItem, i) {\n  var data = legendItem.data,\n    iconWidth = legendItem.iconWidth,\n    iconHeight = legendItem.iconHeight;\n  var _data$i$iconPosition = (0, _slicedToArray2[\"default\"])(data[i].iconPosition, 2),\n    x = _data$i$iconPosition[0],\n    y = _data$i$iconPosition[1];\n  var halfIconHeight = iconHeight / 2;\n  return {\n    x: x,\n    y: y - halfIconHeight,\n    w: iconWidth,\n    h: iconHeight\n  };\n}\nfunction getIconStyle(legendItem, i) {\n  var data = legendItem.data,\n    iconStyle = legendItem.iconStyle,\n    iconUnselectedStyle = legendItem.iconUnselectedStyle;\n  var _data$i = data[i],\n    status = _data$i.status,\n    color = _data$i.color;\n  var style = status ? iconStyle : iconUnselectedStyle;\n  return (0, _util2.deepMerge)({\n    fill: color\n  }, style);\n}\nfunction getTextConfig(legendItem, updater) {\n  var data = legendItem.data,\n    selectAble = legendItem.selectAble,\n    animationCurve = legendItem.animationCurve,\n    animationFrame = legendItem.animationFrame,\n    rLevel = legendItem.rLevel;\n  return data.map(function (foo, i) {\n    return {\n      name: 'text',\n      index: rLevel,\n      visible: legendItem.show,\n      hover: selectAble,\n      animationCurve: animationCurve,\n      animationFrame: animationFrame,\n      hoverRect: getTextHoverRect(legendItem, i),\n      shape: getTextShape(legendItem, i),\n      style: getTextStyle(legendItem, i),\n      click: createClickCallBack(legendItem, i, updater)\n    };\n  });\n}\nfunction getTextShape(legendItem, i) {\n  var _legendItem$data$i = legendItem.data[i],\n    textPosition = _legendItem$data$i.textPosition,\n    name = _legendItem$data$i.name;\n  return {\n    content: name,\n    position: textPosition\n  };\n}\nfunction getTextStyle(legendItem, i) {\n  var textStyle = legendItem.textStyle,\n    textUnselectedStyle = legendItem.textUnselectedStyle;\n  var _legendItem$data$i2 = legendItem.data[i],\n    status = _legendItem$data$i2.status,\n    align = _legendItem$data$i2.align;\n  var style = status ? textStyle : textUnselectedStyle;\n  return (0, _util2.deepMerge)((0, _util.deepClone)(style, true), align);\n}\nfunction getTextHoverRect(legendItem, i) {\n  var textStyle = legendItem.textStyle,\n    textUnselectedStyle = legendItem.textUnselectedStyle;\n  var _legendItem$data$i3 = legendItem.data[i],\n    status = _legendItem$data$i3.status,\n    _legendItem$data$i3$t = (0, _slicedToArray2[\"default\"])(_legendItem$data$i3.textPosition, 2),\n    x = _legendItem$data$i3$t[0],\n    y = _legendItem$data$i3$t[1],\n    textWidth = _legendItem$data$i3.textWidth;\n  var style = status ? textStyle : textUnselectedStyle;\n  var fontSize = style.fontSize;\n  return [x, y - fontSize / 2, textWidth, fontSize];\n}\nfunction createClickCallBack(legendItem, index, updater) {\n  var name = legendItem.data[index].name;\n  return function () {\n    var _updater$chart = updater.chart,\n      legendStatus = _updater$chart.legendStatus,\n      option = _updater$chart.option;\n    var status = !legendStatus[index];\n    var change = option.series.find(function (_ref9) {\n      var sn = _ref9.name;\n      return sn === name;\n    });\n    change.show = status;\n    legendStatus[index] = status;\n    updater.chart.setOption(option);\n  };\n}","map":{"version":3,"names":["require","_interopRequireDefault","Object","defineProperty","exports","value","legend","_defineProperty2","_slicedToArray2","_typeof2","_updater","_util","_config","_util2","chart","option","arguments","length","undefined","deepMerge","deepClone","legendConfig","initLegendData","filterInvalidData","calcLegendTextWidth","calcLegendPosition","doUpdate","series","key","getGraphConfig","getIconConfig","getTextConfig","data","map","item","itemType","name","legendStatus","filter","result","find","_ref","sn","color","icon","type","Array","fill","forEach","i","status","ctx","render","textStyle","textUnselectedStyle","textWidth","getTextWidth","text","style","font","getFontConfig","measureText","width","fontFamily","fontSize","concat","orient","calcVerticalPosition","calcHorizontalPosition","iconHeight","itemGap","lines","calcDefaultHorizontalPosition","xOffsets","line","getHorizontalXOffset","yOffset","getHorizontalYOffset","align","textAlign","textBaseline","iconPosition","textPosition","xOffset","realYOffset","mergeOffset","iconWidth","w","area","startIndex","beforeWidth","getBeforeWidth","endXPos","push","slice","currentIndex","beforeItem","mulAdd","_ref2","left","right","dataNum","allWidth","_ref3","horizontal","findIndex","pos","parseInt","top","bottom","h","vertical","halfIconHeight","_chart$gridArea","gridArea","y","height","_ref4","_ref5","_ref6","x","_ref7","ox","oy","_getVerticalXOffset","getVerticalXOffset","_getVerticalXOffset2","isRight","getVerticalYOffset","calcDefaultVerticalPosition","offset","Boolean","allHeight","yPos","iconXPos","textXpos","legendItem","updater","selectAble","animationCurve","animationFrame","rLevel","index","visible","show","hover","click","shape","getIconShape","getIconStyle","createClickCallBack","_data$i$iconPosition","iconStyle","iconUnselectedStyle","_data$i","foo","hoverRect","getTextHoverRect","getTextShape","getTextStyle","_legendItem$data$i","content","position","_legendItem$data$i2","_legendItem$data$i3","_legendItem$data$i3$t","_updater$chart","change","_ref9","setOption"],"sources":["C:/demo01/management_front_end/node_modules/@jiaminghi/charts/lib/core/legend.js"],"sourcesContent":["\"use strict\";\r\n\r\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.legend = legend;\r\n\r\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\r\n\r\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\r\n\r\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\r\n\r\nvar _updater = require(\"../class/updater.class\");\r\n\r\nvar _util = require(\"@jiaminghi/c-render/lib/plugin/util\");\r\n\r\nvar _config = require(\"../config\");\r\n\r\nvar _util2 = require(\"../util\");\r\n\r\nfunction legend(chart) {\r\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n  var legend = option.legend;\r\n\r\n  if (legend) {\r\n    legend = (0, _util2.deepMerge)((0, _util.deepClone)(_config.legendConfig, true), legend);\r\n    legend = initLegendData(legend);\r\n    legend = filterInvalidData(legend, option, chart);\r\n    legend = calcLegendTextWidth(legend, chart);\r\n    legend = calcLegendPosition(legend, chart);\r\n    legend = [legend];\r\n  } else {\r\n    legend = [];\r\n  }\r\n\r\n  (0, _updater.doUpdate)({\r\n    chart: chart,\r\n    series: legend,\r\n    key: 'legendIcon',\r\n    getGraphConfig: getIconConfig\r\n  });\r\n  (0, _updater.doUpdate)({\r\n    chart: chart,\r\n    series: legend,\r\n    key: 'legendText',\r\n    getGraphConfig: getTextConfig\r\n  });\r\n}\r\n\r\nfunction initLegendData(legend) {\r\n  var data = legend.data;\r\n  legend.data = data.map(function (item) {\r\n    var itemType = (0, _typeof2[\"default\"])(item);\r\n\r\n    if (itemType === 'string') {\r\n      return {\r\n        name: item\r\n      };\r\n    } else if (itemType === 'object') {\r\n      return item;\r\n    }\r\n\r\n    return {\r\n      name: ''\r\n    };\r\n  });\r\n  return legend;\r\n}\r\n\r\nfunction filterInvalidData(legend, option, chart) {\r\n  var series = option.series;\r\n  var legendStatus = chart.legendStatus;\r\n  var data = legend.data.filter(function (item) {\r\n    var name = item.name;\r\n    var result = series.find(function (_ref) {\r\n      var sn = _ref.name;\r\n      return name === sn;\r\n    });\r\n    if (!result) return false;\r\n    if (!item.color) item.color = result.color;\r\n    if (!item.icon) item.icon = result.type;\r\n    return item;\r\n  });\r\n  if (!legendStatus || legendStatus.length !== legend.data.length) legendStatus = new Array(legend.data.length).fill(true);\r\n  data.forEach(function (item, i) {\r\n    return item.status = legendStatus[i];\r\n  });\r\n  legend.data = data;\r\n  chart.legendStatus = legendStatus;\r\n  return legend;\r\n}\r\n\r\nfunction calcLegendTextWidth(legend, chart) {\r\n  var ctx = chart.render.ctx;\r\n  var data = legend.data,\r\n      textStyle = legend.textStyle,\r\n      textUnselectedStyle = legend.textUnselectedStyle;\r\n  data.forEach(function (item) {\r\n    var status = item.status,\r\n        name = item.name;\r\n    item.textWidth = getTextWidth(ctx, name, status ? textStyle : textUnselectedStyle);\r\n  });\r\n  return legend;\r\n}\r\n\r\nfunction getTextWidth(ctx, text, style) {\r\n  ctx.font = getFontConfig(style);\r\n  return ctx.measureText(text).width;\r\n}\r\n\r\nfunction getFontConfig(style) {\r\n  var fontFamily = style.fontFamily,\r\n      fontSize = style.fontSize;\r\n  return \"\".concat(fontSize, \"px \").concat(fontFamily);\r\n}\r\n\r\nfunction calcLegendPosition(legend, chart) {\r\n  var orient = legend.orient;\r\n\r\n  if (orient === 'vertical') {\r\n    calcVerticalPosition(legend, chart);\r\n  } else {\r\n    calcHorizontalPosition(legend, chart);\r\n  }\r\n\r\n  return legend;\r\n}\r\n\r\nfunction calcHorizontalPosition(legend, chart) {\r\n  var iconHeight = legend.iconHeight,\r\n      itemGap = legend.itemGap;\r\n  var lines = calcDefaultHorizontalPosition(legend, chart);\r\n  var xOffsets = lines.map(function (line) {\r\n    return getHorizontalXOffset(line, legend, chart);\r\n  });\r\n  var yOffset = getHorizontalYOffset(legend, chart);\r\n  var align = {\r\n    textAlign: 'left',\r\n    textBaseline: 'middle'\r\n  };\r\n  lines.forEach(function (line, i) {\r\n    return line.forEach(function (item) {\r\n      var iconPosition = item.iconPosition,\r\n          textPosition = item.textPosition;\r\n      var xOffset = xOffsets[i];\r\n      var realYOffset = yOffset + i * (itemGap + iconHeight);\r\n      item.iconPosition = mergeOffset(iconPosition, [xOffset, realYOffset]);\r\n      item.textPosition = mergeOffset(textPosition, [xOffset, realYOffset]);\r\n      item.align = align;\r\n    });\r\n  });\r\n}\r\n\r\nfunction calcDefaultHorizontalPosition(legend, chart) {\r\n  var data = legend.data,\r\n      iconWidth = legend.iconWidth;\r\n  var w = chart.render.area[0];\r\n  var startIndex = 0;\r\n  var lines = [[]];\r\n  data.forEach(function (item, i) {\r\n    var beforeWidth = getBeforeWidth(startIndex, i, legend);\r\n    var endXPos = beforeWidth + iconWidth + 5 + item.textWidth;\r\n\r\n    if (endXPos >= w) {\r\n      startIndex = i;\r\n      beforeWidth = getBeforeWidth(startIndex, i, legend);\r\n      lines.push([]);\r\n    }\r\n\r\n    item.iconPosition = [beforeWidth, 0];\r\n    item.textPosition = [beforeWidth + iconWidth + 5, 0];\r\n    lines.slice(-1)[0].push(item);\r\n  });\r\n  return lines;\r\n}\r\n\r\nfunction getBeforeWidth(startIndex, currentIndex, legend) {\r\n  var data = legend.data,\r\n      iconWidth = legend.iconWidth,\r\n      itemGap = legend.itemGap;\r\n  var beforeItem = data.slice(startIndex, currentIndex);\r\n  return (0, _util2.mulAdd)(beforeItem.map(function (_ref2) {\r\n    var textWidth = _ref2.textWidth;\r\n    return textWidth;\r\n  })) + (currentIndex - startIndex) * (itemGap + 5 + iconWidth);\r\n}\r\n\r\nfunction getHorizontalXOffset(data, legend, chart) {\r\n  var left = legend.left,\r\n      right = legend.right,\r\n      iconWidth = legend.iconWidth,\r\n      itemGap = legend.itemGap;\r\n  var w = chart.render.area[0];\r\n  var dataNum = data.length;\r\n  var allWidth = (0, _util2.mulAdd)(data.map(function (_ref3) {\r\n    var textWidth = _ref3.textWidth;\r\n    return textWidth;\r\n  })) + dataNum * (5 + iconWidth) + (dataNum - 1) * itemGap;\r\n  var horizontal = [left, right].findIndex(function (pos) {\r\n    return pos !== 'auto';\r\n  });\r\n\r\n  if (horizontal === -1) {\r\n    return (w - allWidth) / 2;\r\n  } else if (horizontal === 0) {\r\n    if (typeof left === 'number') return left;\r\n    return parseInt(left) / 100 * w;\r\n  } else {\r\n    if (typeof right !== 'number') right = parseInt(right) / 100 * w;\r\n    return w - (allWidth + right);\r\n  }\r\n}\r\n\r\nfunction getHorizontalYOffset(legend, chart) {\r\n  var top = legend.top,\r\n      bottom = legend.bottom,\r\n      iconHeight = legend.iconHeight;\r\n  var h = chart.render.area[1];\r\n  var vertical = [top, bottom].findIndex(function (pos) {\r\n    return pos !== 'auto';\r\n  });\r\n  var halfIconHeight = iconHeight / 2;\r\n\r\n  if (vertical === -1) {\r\n    var _chart$gridArea = chart.gridArea,\r\n        y = _chart$gridArea.y,\r\n        height = _chart$gridArea.h;\r\n    return y + height + 45 - halfIconHeight;\r\n  } else if (vertical === 0) {\r\n    if (typeof top === 'number') return top - halfIconHeight;\r\n    return parseInt(top) / 100 * h - halfIconHeight;\r\n  } else {\r\n    if (typeof bottom !== 'number') bottom = parseInt(bottom) / 100 * h;\r\n    return h - bottom - halfIconHeight;\r\n  }\r\n}\r\n\r\nfunction mergeOffset(_ref4, _ref5) {\r\n  var _ref6 = (0, _slicedToArray2[\"default\"])(_ref4, 2),\r\n      x = _ref6[0],\r\n      y = _ref6[1];\r\n\r\n  var _ref7 = (0, _slicedToArray2[\"default\"])(_ref5, 2),\r\n      ox = _ref7[0],\r\n      oy = _ref7[1];\r\n\r\n  return [x + ox, y + oy];\r\n}\r\n\r\nfunction calcVerticalPosition(legend, chart) {\r\n  var _getVerticalXOffset = getVerticalXOffset(legend, chart),\r\n      _getVerticalXOffset2 = (0, _slicedToArray2[\"default\"])(_getVerticalXOffset, 2),\r\n      isRight = _getVerticalXOffset2[0],\r\n      xOffset = _getVerticalXOffset2[1];\r\n\r\n  var yOffset = getVerticalYOffset(legend, chart);\r\n  calcDefaultVerticalPosition(legend, isRight);\r\n  var align = {\r\n    textAlign: 'left',\r\n    textBaseline: 'middle'\r\n  };\r\n  legend.data.forEach(function (item) {\r\n    var textPosition = item.textPosition,\r\n        iconPosition = item.iconPosition;\r\n    item.textPosition = mergeOffset(textPosition, [xOffset, yOffset]);\r\n    item.iconPosition = mergeOffset(iconPosition, [xOffset, yOffset]);\r\n    item.align = align;\r\n  });\r\n}\r\n\r\nfunction getVerticalXOffset(legend, chart) {\r\n  var left = legend.left,\r\n      right = legend.right;\r\n  var w = chart.render.area[0];\r\n  var horizontal = [left, right].findIndex(function (pos) {\r\n    return pos !== 'auto';\r\n  });\r\n\r\n  if (horizontal === -1) {\r\n    return [true, w - 10];\r\n  } else {\r\n    var offset = [left, right][horizontal];\r\n    if (typeof offset !== 'number') offset = parseInt(offset) / 100 * w;\r\n    return [Boolean(horizontal), offset];\r\n  }\r\n}\r\n\r\nfunction getVerticalYOffset(legend, chart) {\r\n  var iconHeight = legend.iconHeight,\r\n      itemGap = legend.itemGap,\r\n      data = legend.data,\r\n      top = legend.top,\r\n      bottom = legend.bottom;\r\n  var h = chart.render.area[1];\r\n  var dataNum = data.length;\r\n  var allHeight = dataNum * iconHeight + (dataNum - 1) * itemGap;\r\n  var vertical = [top, bottom].findIndex(function (pos) {\r\n    return pos !== 'auto';\r\n  });\r\n\r\n  if (vertical === -1) {\r\n    return (h - allHeight) / 2;\r\n  } else {\r\n    var offset = [top, bottom][vertical];\r\n    if (typeof offset !== 'number') offset = parseInt(offset) / 100 * h;\r\n    if (vertical === 1) offset = h - offset - allHeight;\r\n    return offset;\r\n  }\r\n}\r\n\r\nfunction calcDefaultVerticalPosition(legend, isRight) {\r\n  var data = legend.data,\r\n      iconWidth = legend.iconWidth,\r\n      iconHeight = legend.iconHeight,\r\n      itemGap = legend.itemGap;\r\n  var halfIconHeight = iconHeight / 2;\r\n  data.forEach(function (item, i) {\r\n    var textWidth = item.textWidth;\r\n    var yPos = (iconHeight + itemGap) * i + halfIconHeight;\r\n    var iconXPos = isRight ? 0 - iconWidth : 0;\r\n    var textXpos = isRight ? iconXPos - 5 - textWidth : iconWidth + 5;\r\n    item.iconPosition = [iconXPos, yPos];\r\n    item.textPosition = [textXpos, yPos];\r\n  });\r\n}\r\n\r\nfunction getIconConfig(legendItem, updater) {\r\n  var data = legendItem.data,\r\n      selectAble = legendItem.selectAble,\r\n      animationCurve = legendItem.animationCurve,\r\n      animationFrame = legendItem.animationFrame,\r\n      rLevel = legendItem.rLevel;\r\n  return data.map(function (item, i) {\r\n    return (0, _defineProperty2[\"default\"])({\r\n      name: item.icon === 'line' ? 'lineIcon' : 'rect',\r\n      index: rLevel,\r\n      visible: legendItem.show,\r\n      hover: selectAble,\r\n      click: selectAble,\r\n      animationCurve: animationCurve,\r\n      animationFrame: animationFrame,\r\n      shape: getIconShape(legendItem, i),\r\n      style: getIconStyle(legendItem, i)\r\n    }, \"click\", createClickCallBack(legendItem, i, updater));\r\n  });\r\n}\r\n\r\nfunction getIconShape(legendItem, i) {\r\n  var data = legendItem.data,\r\n      iconWidth = legendItem.iconWidth,\r\n      iconHeight = legendItem.iconHeight;\r\n\r\n  var _data$i$iconPosition = (0, _slicedToArray2[\"default\"])(data[i].iconPosition, 2),\r\n      x = _data$i$iconPosition[0],\r\n      y = _data$i$iconPosition[1];\r\n\r\n  var halfIconHeight = iconHeight / 2;\r\n  return {\r\n    x: x,\r\n    y: y - halfIconHeight,\r\n    w: iconWidth,\r\n    h: iconHeight\r\n  };\r\n}\r\n\r\nfunction getIconStyle(legendItem, i) {\r\n  var data = legendItem.data,\r\n      iconStyle = legendItem.iconStyle,\r\n      iconUnselectedStyle = legendItem.iconUnselectedStyle;\r\n  var _data$i = data[i],\r\n      status = _data$i.status,\r\n      color = _data$i.color;\r\n  var style = status ? iconStyle : iconUnselectedStyle;\r\n  return (0, _util2.deepMerge)({\r\n    fill: color\r\n  }, style);\r\n}\r\n\r\nfunction getTextConfig(legendItem, updater) {\r\n  var data = legendItem.data,\r\n      selectAble = legendItem.selectAble,\r\n      animationCurve = legendItem.animationCurve,\r\n      animationFrame = legendItem.animationFrame,\r\n      rLevel = legendItem.rLevel;\r\n  return data.map(function (foo, i) {\r\n    return {\r\n      name: 'text',\r\n      index: rLevel,\r\n      visible: legendItem.show,\r\n      hover: selectAble,\r\n      animationCurve: animationCurve,\r\n      animationFrame: animationFrame,\r\n      hoverRect: getTextHoverRect(legendItem, i),\r\n      shape: getTextShape(legendItem, i),\r\n      style: getTextStyle(legendItem, i),\r\n      click: createClickCallBack(legendItem, i, updater)\r\n    };\r\n  });\r\n}\r\n\r\nfunction getTextShape(legendItem, i) {\r\n  var _legendItem$data$i = legendItem.data[i],\r\n      textPosition = _legendItem$data$i.textPosition,\r\n      name = _legendItem$data$i.name;\r\n  return {\r\n    content: name,\r\n    position: textPosition\r\n  };\r\n}\r\n\r\nfunction getTextStyle(legendItem, i) {\r\n  var textStyle = legendItem.textStyle,\r\n      textUnselectedStyle = legendItem.textUnselectedStyle;\r\n  var _legendItem$data$i2 = legendItem.data[i],\r\n      status = _legendItem$data$i2.status,\r\n      align = _legendItem$data$i2.align;\r\n  var style = status ? textStyle : textUnselectedStyle;\r\n  return (0, _util2.deepMerge)((0, _util.deepClone)(style, true), align);\r\n}\r\n\r\nfunction getTextHoverRect(legendItem, i) {\r\n  var textStyle = legendItem.textStyle,\r\n      textUnselectedStyle = legendItem.textUnselectedStyle;\r\n\r\n  var _legendItem$data$i3 = legendItem.data[i],\r\n      status = _legendItem$data$i3.status,\r\n      _legendItem$data$i3$t = (0, _slicedToArray2[\"default\"])(_legendItem$data$i3.textPosition, 2),\r\n      x = _legendItem$data$i3$t[0],\r\n      y = _legendItem$data$i3$t[1],\r\n      textWidth = _legendItem$data$i3.textWidth;\r\n\r\n  var style = status ? textStyle : textUnselectedStyle;\r\n  var fontSize = style.fontSize;\r\n  return [x, y - fontSize / 2, textWidth, fontSize];\r\n}\r\n\r\nfunction createClickCallBack(legendItem, index, updater) {\r\n  var name = legendItem.data[index].name;\r\n  return function () {\r\n    var _updater$chart = updater.chart,\r\n        legendStatus = _updater$chart.legendStatus,\r\n        option = _updater$chart.option;\r\n    var status = !legendStatus[index];\r\n    var change = option.series.find(function (_ref9) {\r\n      var sn = _ref9.name;\r\n      return sn === name;\r\n    });\r\n    change.show = status;\r\n    legendStatus[index] = status;\r\n    updater.chart.setOption(option);\r\n  };\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}