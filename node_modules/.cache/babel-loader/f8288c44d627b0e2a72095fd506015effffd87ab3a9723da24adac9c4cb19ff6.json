{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport dayjs from \"dayjs\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      accountBooksList: [],\n      dialogFormVisible: false,\n      isTrueOrFalse: false,\n      userFormData: {\n        storeId: '',\n        storeAddress: '',\n        storeDes: '',\n        storeName: '',\n        storePhone: ''\n      },\n      role: '',\n      show: false\n    };\n  },\n  created() {\n    this.getList();\n    this.role = localStorage.getItem('role');\n  },\n  methods: {\n    async getList() {\n      const res = await axios({\n        method: \"get\",\n        url: \"http://172.16.110.32:8080/store/findAll\"\n      });\n      this.accountBooksList = res.data.data, console.log(this.accountBooksList);\n    },\n    viewAccountDetails(bookID, bookName) {\n      // 存储具体某个账套的bookID到localStorage\n      localStorage.setItem(\"bookID\", bookID);\n      localStorage.setItem(\"bookName\", bookName);\n      const text = localStorage.getItem('role');\n      if (text == '财务') {\n        this.$router.push('/FinanceAccountBooks');\n      }\n    },\n    // 打开新增弹窗，\n    addOpen() {\n      // 打开弹窗\n      this.dialogFormVisible = true;\n      // 记录状态\n      // 重置userFormData\n      this.userFormData = {\n        storeId: '',\n        storeAddress: '',\n        storeDes: '',\n        storeName: '',\n        storePhone: ''\n      };\n    },\n    updateOpen(book) {\n      this.show = true;\n      this.userFormData = {\n        ...book\n      };\n    },\n    async update() {\n      const data = {\n        ...this.userFormData\n      };\n      const res = await axios({\n        url: \"http://172.16.110.32:8080/store/updateStore\",\n        method: 'post',\n        data: data\n      });\n      this.show = false;\n      this.getList();\n    },\n    async check(book) {\n      console.log(book, '~~~~');\n      this.isTrueOrFalse = true;\n      this.userFormData = {\n        ...book\n      };\n    },\n    async submit() {\n      // 拷贝userFormData到data\n      const data = {\n        ...this.userFormData\n      };\n      const res = await axios({\n        url: \"http://172.16.110.32:8080/store/addStore\",\n        method: 'post',\n        data: data\n      });\n      this.dialogFormVisible = false;\n      this.getList();\n    }\n  }\n};","map":{"version":3,"names":["dayjs","axios","data","accountBooksList","dialogFormVisible","isTrueOrFalse","userFormData","storeId","storeAddress","storeDes","storeName","storePhone","role","show","created","getList","localStorage","getItem","methods","res","method","url","console","log","viewAccountDetails","bookID","bookName","setItem","text","$router","push","addOpen","updateOpen","book","update","check","submit"],"sources":["src/views/store/Store.vue"],"sourcesContent":["<template>\r\n    <el-card>\r\n        <!-- title -->\r\n        <el-card style=\"text-align:center\">\r\n            <span style=\"font-size: 24px;font-weight: bold;font-family: 'Times New Roman', Times, serif;\">门店管理</span>\r\n        </el-card>\r\n        <!-- 操作按钮 -->\r\n        <el-card style=\"margin-top: 20px\">\r\n            <span style=\"font-size: 16px; font-weight: bold; font-family: 'Times New Roman', Times, serif;\">门店管理</span>\r\n            <!-- 使用 v-if 判断 role 的内容，如果是老板则不显示新增按钮 -->\r\n            <el-button v-if=\"role !== '老板'\" style=\"margin-left: 20px\" @click=\"addOpen\">新增门店</el-button>\r\n        </el-card>\r\n\r\n        <!-- 账套区域 -->\r\n        <el-row>\r\n            <el-col v-for=\"item in accountBooksList\" :span=\"8\">\r\n                <el-card>\r\n                    <div slot=\"header\" class=\"clearfix\">\r\n                        <span>{{ item.storeName }}</span>\r\n                        <el-button v-if=\"role !== '财务'\" type=\"text\" @click=\"check(item)\">\r\n                            查看具体信息\r\n                        </el-button>\r\n                        <el-button v-if=\"role !== '老板'\" type=\"text\" @click=\"updateOpen(item)\">\r\n                            修改门店\r\n                        </el-button>\r\n                        <el-button type=\"text\" @click=\"viewAccountDetails(item.bookID, item.bookName)\">\r\n                            进入当前门店\r\n                        </el-button>\r\n                    </div>\r\n                    <p style=\"margin-top:10px\">门店名称：{{ item.storeName }}</p>\r\n                    <p style=\"margin-top:20px\">门店地址：{{ item.storeAddress }}</p>\r\n                    <p style=\"margin-top:20px\">门店电话：{{ item.storePhone }}</p>\r\n                    <p style=\"margin-top:20px\">门店描述：{{ item.storeDes }}</p>\r\n\r\n                </el-card>\r\n            </el-col>\r\n        </el-row>\r\n\r\n        <!-- 新增弹窗区域 -->\r\n        <el-dialog title=\"新增门店具体信息\" :visible.sync=\"dialogFormVisible\">\r\n            <el-form :model=\"userFormData\" class=\"demo-form-inline\" label-width=\"120px\">\r\n                <el-form-item label=\"门店地址\">\r\n                    <el-input v-model=\"userFormData.storeAddress\" placeholder=\"门店地址\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"门店描述\">\r\n                    <el-input v-model=\"userFormData.storeDes\" placeholder=\"门店描述\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"门店名称\">\r\n                    <el-input v-model=\"userFormData.storeName\" placeholder=\"门店名称\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"门店号码\">\r\n                    <el-input v-model=\"userFormData.storePhone\" placeholder=\"门店号码\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button @click=\"submit\">提交</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-dialog>\r\n\r\n        <!-- 查看弹窗区域 -->\r\n        <el-dialog title=\"查看账套具体信息\" :visible.sync=\"isTrueOrFalse\">\r\n            <el-form :model=\"userFormData\" class=\"demo-form-inline\" label-width=\"120px\">\r\n                <el-form-item label=\"门店地址\">\r\n                    <el-input v-model=\"userFormData.storeAddress\" placeholder=\"门店地址\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"门店描述\">\r\n                    <el-input v-model=\"userFormData.storeDes\" placeholder=\"门店描述\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"门店名称\">\r\n                    <el-input v-model=\"userFormData.storeName\" placeholder=\"门店名称\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"门店号码\">\r\n                    <el-input v-model=\"userFormData.storePhone\" placeholder=\"门店号码\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-dialog>\r\n\r\n        <!-- 修改弹窗区域 -->\r\n        <el-dialog title=\"修改门店信息\" :visible.sync=\"show\">\r\n            <el-form :model=\"userFormData\" class=\"demo-form-inline\" label-width=\"120px\">\r\n\r\n                <el-form-item label=\"门店地址\">\r\n                    <el-input v-model=\"userFormData.storeAddress\" placeholder=\"门店地址\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"门店描述\">\r\n                    <el-input v-model=\"userFormData.storeDes\" placeholder=\"门店描述\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"门店名称\">\r\n                    <el-input v-model=\"userFormData.storeName\" placeholder=\"门店名称\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"门店号码\">\r\n                    <el-input v-model=\"userFormData.storePhone\" placeholder=\"门店号码\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item>\r\n                    <el-button @click=\"update\">提交</el-button>\r\n                </el-form-item>\r\n\r\n            </el-form>\r\n        </el-dialog>\r\n\r\n\r\n    </el-card>\r\n</template>\r\n\r\n<script>\r\n\r\nimport dayjs from \"dayjs\";\r\nimport axios from \"axios\";\r\nexport default {\r\n\r\n    data() {\r\n        return {\r\n            accountBooksList: [],\r\n            dialogFormVisible: false,\r\n            isTrueOrFalse: false,\r\n            userFormData: {\r\n                storeId: '',\r\n                storeAddress: '',\r\n                storeDes: '',\r\n                storeName: '',\r\n                storePhone: '',\r\n            },\r\n            role: '',\r\n            show: false\r\n        };\r\n    },\r\n    created() {\r\n        this.getList();\r\n        this.role = localStorage.getItem('role');\r\n    },\r\n    methods: {\r\n        async getList() {\r\n            const res = await axios({\r\n                method: \"get\",\r\n                url: \"http://172.16.110.32:8080/store/findAll\",\r\n            });\r\n            this.accountBooksList = res.data.data,\r\n                console.log(this.accountBooksList)\r\n        },\r\n\r\n        viewAccountDetails(bookID, bookName) {\r\n            // 存储具体某个账套的bookID到localStorage\r\n            localStorage.setItem(\"bookID\", bookID);\r\n            localStorage.setItem(\"bookName\", bookName);\r\n            const text = localStorage.getItem('role');\r\n            if (text == '财务') {\r\n                this.$router.push('/FinanceAccountBooks');\r\n            }\r\n        },\r\n\r\n        // 打开新增弹窗，\r\n        addOpen() {\r\n            // 打开弹窗\r\n            this.dialogFormVisible = true\r\n            // 记录状态\r\n            // 重置userFormData\r\n            this.userFormData = {\r\n                storeId: '',\r\n                storeAddress: '',\r\n                storeDes: '',\r\n                storeName: '',\r\n                storePhone: '',\r\n            }\r\n        },\r\n        updateOpen(book) {\r\n            this.show = true\r\n            this.userFormData = { ...book }\r\n        },\r\n\r\n        async update() {\r\n            const data = { ...this.userFormData }\r\n            const res = await axios({\r\n                url: \"http://172.16.110.32:8080/store/updateStore\",\r\n                method: 'post',\r\n                data: data\r\n            })\r\n            this.show = false\r\n            this.getList()\r\n        },\r\n\r\n        async check(book) {\r\n            console.log(book, '~~~~')\r\n            this.isTrueOrFalse = true\r\n            this.userFormData = { ...book }\r\n        },\r\n\r\n        async submit() {\r\n            // 拷贝userFormData到data\r\n            const data = {\r\n                ...this.userFormData\r\n            }\r\n            const res = await axios({\r\n                url: \"http://172.16.110.32:8080/store/addStore\",\r\n                method: 'post',\r\n                data: data\r\n            })\r\n            this.dialogFormVisible = false\r\n            this.getList()\r\n        },\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.text {\r\n    font-size: 14px;\r\n}\r\n\r\n.item {\r\n    margin-bottom: 18px;\r\n}\r\n\r\n.clearfix:before,\r\n.clearfix:after {\r\n    display: table;\r\n    content: \"\";\r\n}\r\n\r\n.clearfix:after {\r\n    clear: both\r\n}\r\n\r\n.box-card {\r\n    width: 480px;\r\n}\r\n</style>"],"mappings":";AAoHA,OAAAA,KAAA;AACA,OAAAC,KAAA;AACA;EAEAC,KAAA;IACA;MACAC,gBAAA;MACAC,iBAAA;MACAC,aAAA;MACAC,YAAA;QACAC,OAAA;QACAC,YAAA;QACAC,QAAA;QACAC,SAAA;QACAC,UAAA;MACA;MACAC,IAAA;MACAC,IAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,OAAA;IACA,KAAAH,IAAA,GAAAI,YAAA,CAAAC,OAAA;EACA;EACAC,OAAA;IACA,MAAAH,QAAA;MACA,MAAAI,GAAA,SAAAlB,KAAA;QACAmB,MAAA;QACAC,GAAA;MACA;MACA,KAAAlB,gBAAA,GAAAgB,GAAA,CAAAjB,IAAA,CAAAA,IAAA,EACAoB,OAAA,CAAAC,GAAA,MAAApB,gBAAA;IACA;IAEAqB,mBAAAC,MAAA,EAAAC,QAAA;MACA;MACAV,YAAA,CAAAW,OAAA,WAAAF,MAAA;MACAT,YAAA,CAAAW,OAAA,aAAAD,QAAA;MACA,MAAAE,IAAA,GAAAZ,YAAA,CAAAC,OAAA;MACA,IAAAW,IAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;MACA;IACA;IAEA;IACAC,QAAA;MACA;MACA,KAAA3B,iBAAA;MACA;MACA;MACA,KAAAE,YAAA;QACAC,OAAA;QACAC,YAAA;QACAC,QAAA;QACAC,SAAA;QACAC,UAAA;MACA;IACA;IACAqB,WAAAC,IAAA;MACA,KAAApB,IAAA;MACA,KAAAP,YAAA;QAAA,GAAA2B;MAAA;IACA;IAEA,MAAAC,OAAA;MACA,MAAAhC,IAAA;QAAA,QAAAI;MAAA;MACA,MAAAa,GAAA,SAAAlB,KAAA;QACAoB,GAAA;QACAD,MAAA;QACAlB,IAAA,EAAAA;MACA;MACA,KAAAW,IAAA;MACA,KAAAE,OAAA;IACA;IAEA,MAAAoB,MAAAF,IAAA;MACAX,OAAA,CAAAC,GAAA,CAAAU,IAAA;MACA,KAAA5B,aAAA;MACA,KAAAC,YAAA;QAAA,GAAA2B;MAAA;IACA;IAEA,MAAAG,OAAA;MACA;MACA,MAAAlC,IAAA;QACA,QAAAI;MACA;MACA,MAAAa,GAAA,SAAAlB,KAAA;QACAoB,GAAA;QACAD,MAAA;QACAlB,IAAA,EAAAA;MACA;MACA,KAAAE,iBAAA;MACA,KAAAW,OAAA;IACA;EACA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}