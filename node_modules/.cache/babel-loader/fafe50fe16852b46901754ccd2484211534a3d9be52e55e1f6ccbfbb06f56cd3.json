{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { addRouteByRole } from '@/router';\nimport { Message } from 'element-ui';\nexport default {\n  data() {\n    return {\n      // true： 展示密码  眼睛（开）  false： 展示点点点  眼睛（关）\n      showPwd: false,\n      // 表单的数据\n      form: {\n        content: '',\n        password: ''\n        // role: '',\n      },\n      // 表单的规则集: 键名： 你要对表单数据对象下的哪一个属性配置规则, 键名： 真正的规则：数组， 当你只有一个规则的时候，可以就是一个对象\n      rules: {\n        // 非空校验\n        content: {\n          required: true,\n          message: '请输入手机号/邮箱',\n          trigger: 'change'\n        },\n        password: {\n          required: true,\n          message: '请输入密码',\n          trigger: 'change'\n        }\n        // role:{ required: true, message: '请选择角色', trigger: 'change' }\n      }\n    };\n  },\n  methods: {\n    clickEyes() {\n      this.showPwd = !this.showPwd;\n    },\n    // 提交表单 async\n    async submit() {\n      const LoginResult = await axios({\n        method: \"post\",\n        url: \"http://localhost:8080/employee/login\",\n        data: this.form\n      });\n      // 登录成功，把用户的id和用户的角色存放到本地\n      if (LoginResult.data.code == 200) {\n        localStorage.setItem(\"employeeID\", LoginResult.data.data.employeeID);\n        localStorage.setItem(\"role\", LoginResult.data.data.roleName);\n        // 根据角色\n        if (LoginResult.data.data.roleName == '财务') {\n          localStorage.setItem('name', LoginResult.data.data.employeeID);\n          // 等待两秒后跳转页面\n          Message.success('即将进入账套界面');\n          setTimeout(() => {\n            // 跳转页面\n            this.$router.push('/Store');\n          }, 2000);\n        } else if (LoginResult.data.data.roleName == '老板') {\n          Message.success('即将进入账套界面');\n          setTimeout(() => {\n            // 跳转页面\n            this.$router.push('/financeAccountBooks');\n          }, 2000);\n        } else {\n          localStorage.setItem('bookID', LoginResult.data.data.accountBook.bookID);\n          localStorage.setItem('bookName', LoginResult.data.data.accountBook.bookName);\n          localStorage.setItem('name', LoginResult.data.data.name);\n          Message.success('即将进入员工主界面');\n          setTimeout(() => {\n            // 跳转页面\n            this.$router.push('/personalReimbursement');\n          }, 2000);\n        }\n      } else {\n        Message.error('登录失败');\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","addRouteByRole","Message","data","showPwd","form","content","password","rules","required","message","trigger","methods","clickEyes","submit","LoginResult","method","url","code","localStorage","setItem","employeeID","roleName","success","setTimeout","$router","push","accountBook","bookID","bookName","name","error"],"sources":["src/views/login/Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-wrapper\">\r\n    <div class=\"login-form\">\r\n      <h2 class=\"login-title\">欢迎来到餐饮管理系统</h2>\r\n      <!-- 表单的容器 -->\r\n      <el-form ref=\"ruleform\" :model=\"form\" :rules=\"rules\">\r\n\r\n        <!-- 用户账号 -->\r\n        <el-form-item prop=\"account\">\r\n          <!-- 该表单项的内容 -->\r\n          <el-input suffix-icon=\"icon-yonghu iconfont\" prefix-icon=\"el-icon-search\" placeholder=\"请输入手机号/邮箱\"\r\n            v-model=\"form.content\"></el-input>\r\n        </el-form-item>\r\n\r\n        <!-- 用户密码 -->\r\n        <el-form-item prop=\"password\">\r\n          <el-input :type=\"showPwd ? 'text' : 'password'\" placeholder=\"请输入密码\" v-model=\"form.password\">\r\n            <i slot=\"prefix\" class=\"el-input__icon el-icon-search\"></i>\r\n            <!-- 尾部插入图标: -->\r\n            <i slot=\"suffix\" @click=\"clickEyes\" class=\"iconfont\"\r\n              :class=\"{ 'icon-yanjing': showPwd, 'icon-biyanjing': !showPwd }\"></i>\r\n          </el-input>\r\n        </el-form-item>\r\n\r\n        <!-- 用户角色\r\n        <el-form-item prop=\"role\">\r\n          <el-select style=\"width: 100%;\" v-model=\"form.role\">\r\n            <el-option label=\"财务\" value=\"财务\"></el-option>\r\n            <el-option label=\"员工\" value=\"员工\"></el-option>\r\n            <el-option label=\"老板\" value=\"老板\"></el-option>\r\n          </el-select>\r\n        </el-form-item> -->\r\n\r\n        <!-- 登录按钮 -->\r\n        <el-form-item>\r\n          <el-button @click=\"submit\" style=\"width: 100%;margin-top: 10px;\" type=\"primary\">登录</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport { addRouteByRole } from '@/router'\r\nimport { Message } from 'element-ui';\r\nexport default {\r\n  data() {\r\n    return {\r\n\r\n      // true： 展示密码  眼睛（开）  false： 展示点点点  眼睛（关）\r\n      showPwd: false,\r\n\r\n      // 表单的数据\r\n      form: {\r\n        content: '',\r\n        password: '',\r\n        // role: '',\r\n      },\r\n\r\n      // 表单的规则集: 键名： 你要对表单数据对象下的哪一个属性配置规则, 键名： 真正的规则：数组， 当你只有一个规则的时候，可以就是一个对象\r\n      rules: {\r\n        // 非空校验\r\n        content: { required: true, message: '请输入手机号/邮箱', trigger: 'change' },\r\n        password: { required: true, message: '请输入密码', trigger: 'change' },\r\n        // role:{ required: true, message: '请选择角色', trigger: 'change' }\r\n      }\r\n\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    clickEyes() {\r\n      this.showPwd = !this.showPwd\r\n    },\r\n    // 提交表单 async\r\n    async submit() {\r\n\r\n      const LoginResult = await axios({\r\n        method: \"post\",\r\n        url: \"http://localhost:8080/employee/login\",\r\n        data: this.form,\r\n      })\r\n      // 登录成功，把用户的id和用户的角色存放到本地\r\n      if (LoginResult.data.code == 200) {\r\n        \r\n        localStorage.setItem(\"employeeID\", LoginResult.data.data.employeeID);\r\n        localStorage.setItem(\"role\", LoginResult.data.data.roleName);\r\n        // 根据角色\r\n        if (LoginResult.data.data.roleName == '财务') {\r\n          localStorage.setItem('name',LoginResult.data.data.employeeID)\r\n          // 等待两秒后跳转页面\r\n          Message.success('即将进入账套界面')\r\n          setTimeout(() => {\r\n            // 跳转页面\r\n            this.$router.push('/Store');\r\n          }, 2000);\r\n        }else if (LoginResult.data.data.roleName == '老板') {\r\n          Message.success('即将进入账套界面')\r\n          setTimeout(() => {\r\n            // 跳转页面\r\n            this.$router.push('/financeAccountBooks');\r\n          }, 2000);\r\n        }else {\r\n          localStorage.setItem('bookID', LoginResult.data.data.accountBook.bookID)\r\n          localStorage.setItem('bookName', LoginResult.data.data.accountBook.bookName)\r\n          localStorage.setItem('name',LoginResult.data.data.name)\r\n          Message.success('即将进入员工主界面')\r\n          setTimeout(() => {\r\n            // 跳转页面\r\n            this.$router.push('/personalReimbursement');\r\n          }, 2000);\r\n        }\r\n      } else {\r\n        Message.error('登录失败')\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.login-wrapper {\r\n  width: 100vw;\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: rgb(245, 245, 245);\r\n\r\n  .login-form {\r\n    width: 500px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n\r\n    .login-title {\r\n      margin: 20px;\r\n      font-weight: 700;\r\n      font-size: 22px;\r\n      color: black;\r\n    }\r\n\r\n    .el-form {\r\n      width: 100%;\r\n    }\r\n  }\r\n\r\n  ::v-deep .el-input__inner {\r\n    background-color: #fff;\r\n  }\r\n\r\n  ::v-deep .el-input input {\r\n    color: black;\r\n  }\r\n\r\n  ::v-deep .el-button--primary {\r\n    color: #FFF;\r\n    background-color:rgb(13, 110, 253);\r\n    border-color: #409EFF;\r\n}\r\n}\r\n</style>"],"mappings":";AA2CA,OAAAA,KAAA;AACA,SAAAC,cAAA;AACA,SAAAC,OAAA;AACA;EACAC,KAAA;IACA;MAEA;MACAC,OAAA;MAEA;MACAC,IAAA;QACAC,OAAA;QACAC,QAAA;QACA;MACA;MAEA;MACAC,KAAA;QACA;QACAF,OAAA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAJ,QAAA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACA;MACA;IAEA;EACA;EAEAC,OAAA;IACAC,UAAA;MACA,KAAAT,OAAA,SAAAA,OAAA;IACA;IACA;IACA,MAAAU,OAAA;MAEA,MAAAC,WAAA,SAAAf,KAAA;QACAgB,MAAA;QACAC,GAAA;QACAd,IAAA,OAAAE;MACA;MACA;MACA,IAAAU,WAAA,CAAAZ,IAAA,CAAAe,IAAA;QAEAC,YAAA,CAAAC,OAAA,eAAAL,WAAA,CAAAZ,IAAA,CAAAA,IAAA,CAAAkB,UAAA;QACAF,YAAA,CAAAC,OAAA,SAAAL,WAAA,CAAAZ,IAAA,CAAAA,IAAA,CAAAmB,QAAA;QACA;QACA,IAAAP,WAAA,CAAAZ,IAAA,CAAAA,IAAA,CAAAmB,QAAA;UACAH,YAAA,CAAAC,OAAA,SAAAL,WAAA,CAAAZ,IAAA,CAAAA,IAAA,CAAAkB,UAAA;UACA;UACAnB,OAAA,CAAAqB,OAAA;UACAC,UAAA;YACA;YACA,KAAAC,OAAA,CAAAC,IAAA;UACA;QACA,WAAAX,WAAA,CAAAZ,IAAA,CAAAA,IAAA,CAAAmB,QAAA;UACApB,OAAA,CAAAqB,OAAA;UACAC,UAAA;YACA;YACA,KAAAC,OAAA,CAAAC,IAAA;UACA;QACA;UACAP,YAAA,CAAAC,OAAA,WAAAL,WAAA,CAAAZ,IAAA,CAAAA,IAAA,CAAAwB,WAAA,CAAAC,MAAA;UACAT,YAAA,CAAAC,OAAA,aAAAL,WAAA,CAAAZ,IAAA,CAAAA,IAAA,CAAAwB,WAAA,CAAAE,QAAA;UACAV,YAAA,CAAAC,OAAA,SAAAL,WAAA,CAAAZ,IAAA,CAAAA,IAAA,CAAA2B,IAAA;UACA5B,OAAA,CAAAqB,OAAA;UACAC,UAAA;YACA;YACA,KAAAC,OAAA,CAAAC,IAAA;UACA;QACA;MACA;QACAxB,OAAA,CAAA6B,KAAA;MACA;IACA;EACA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}