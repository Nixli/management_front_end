{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      srcList: [],\n      list: [],\n      pagenum: 1,\n      pagesize: 5,\n      total: 0,\n      options: [],\n      options1: [],\n      value1: '',\n      value: '',\n      value2: true,\n      dialogFormVisible: false,\n      houseFormData: {\n        code: '',\n        style: '',\n        address: '',\n        floor: '',\n        rent: '',\n        status: '',\n        state: ''\n      },\n      actionType: '',\n      id: ''\n    };\n  },\n  async created() {\n    // 获取房源列表数据\n    this.getList();\n    // 获取户型选项数据\n    this.getOptions();\n    //获取租金选项数据\n    this.getOptions1();\n  },\n  methods: {\n    // 获取房源列表数据\n    async getList() {\n      const res = await axios({\n        url: 'http://localhost:3000/house',\n        method: 'get',\n        params: {\n          pagenum: this.pagenum,\n          pagesize: this.pagesize\n        }\n      });\n      this.list = res.data.data.list;\n      this.total = res.data.data.total;\n    },\n    // 获取户型选项数据\n    async getOptions() {\n      const res = await axios({\n        url: 'http://localhost:3000/style',\n        method: 'get'\n      });\n      console.log(res);\n      this.options = res.data.data.list;\n    },\n    //获取租金选项数据\n    async getOptions1() {\n      const res = await axios({\n        url: 'http://localhost:3000/valu',\n        method: 'get'\n      });\n      console.log(res);\n      this.options1 = res.data.data.list;\n    },\n    //页码\n    async pagechange(pagenum) {\n      console.log(`页码改变了:${pagenum}`);\n      this.pagenum = pagenum;\n      const res = await axios({\n        url: \"http://localhost:3000/house\",\n        method: 'get',\n        params: {\n          pagenum: this.pagenum,\n          pagesize: this.pagesize\n        }\n      });\n      this.list = res.data.data.list;\n      this.total = res.data.data.total;\n    },\n    //搜索\n    async search() {\n      console.log(this.params.address, this.params.style, this.params.rent);\n      //对户型进行搜索\n      const selectedOption = this.options.find(option => option.id === this.params.style);\n      if (selectedOption) {\n        this.params.style = selectedOption.id;\n      }\n      //对租金区间进行搜索\n      const selectedOption1 = this.options1.find(option1 => option1.id === this.params.rent);\n      if (selectedOption1) {\n        this.params.rent = selectedOption1.id;\n      }\n      const res = await axios({\n        url: \"http://localhost:3000/house\",\n        method: \"get\",\n        params: {\n          pagenum: this.pagenum,\n          pagesize: this.pagesize,\n          ...this.params\n        }\n      });\n      this.list = res.data.data.list;\n      this.total = res.data.data.total;\n    },\n    //编辑\n    edit(row) {\n      this.dialogFormVisible = true;\n      console.log(row);\n      this.houseFormData.code = row.code;\n      this.houseFormData.style = row.style;\n      this.houseFormData.address = row.address;\n      this.houseFormData.floor = row.floor;\n      this.houseFormData.rent = row.rent;\n      this.houseFormData.status = row.value2 ? '已租' : '待租';\n      this.id = row.id;\n      this.actionType = 'edit';\n    },\n    handleChange(value) {\n      this.value2 = value;\n    },\n    //新增\n    add() {\n      this.$router.push('/source/add');\n    },\n    async submit(id) {\n      // 拷贝userFormData到data\n      const data = {\n        ...this.houseFormData\n      };\n      // 修改的时候需要把id带过去\n      if (this.actionType === 'edit') {\n        data.id = this.id;\n      }\n      data.status = this.value2 ? '已租' : '待租';\n      const selectedOption = this.options.find(option => option.id === this.value);\n      if (selectedOption) {\n        data.style = selectedOption.style;\n      }\n      const res = await axios({\n        url: 'http://localhost:3000/house',\n        method: 'post',\n        data: data\n      });\n      const updatedItem = this.list.find(item => item.id === this.id);\n      if (updatedItem) {\n        updatedItem.code = data.code;\n        updatedItem.style = data.style;\n        updatedItem.floor = data.floor;\n        updatedItem.address = data.address;\n        updatedItem.rent = data.rent;\n        updatedItem.status = data.status;\n      }\n\n      // 更新houseFormData对象\n      this.houseFormData = {\n        ...data\n      };\n\n      // 关闭弹窗\n      this.dialogFormVisible = false;\n    },\n    //改变上架下架状态值\n    async handleSwitchChange(row) {\n      // 拷贝userFormData到data\n      const data = {\n        id: row.id,\n        state: row.state === true ? 1 : 0\n      };\n      const res = await axios({\n        url: 'http://localhost:3000/house',\n        method: 'post',\n        data: data\n      });\n      const updatedItem = this.list.find(item => item.id === row.id);\n      if (updatedItem) {\n        updatedItem.state = row.state;\n      }\n      // 更新houseFormData对象\n      this.houseFormData = {\n        ...data\n      };\n    }\n  }\n};","map":{"version":3,"names":["axios","data","srcList","list","pagenum","pagesize","total","options","options1","value1","value","value2","dialogFormVisible","houseFormData","code","style","address","floor","rent","status","state","actionType","id","created","getList","getOptions","getOptions1","methods","res","url","method","params","console","log","pagechange","search","selectedOption","find","option","selectedOption1","option1","edit","row","handleChange","add","$router","push","submit","updatedItem","item","handleSwitchChange"],"sources":["src/views/test01.vue"],"sourcesContent":["<template>\r\n    <el-card>\r\n\r\n        <el-table :data=\"list\" border style=\"width: 100%\">\r\n            <el-table-column type=\"expand\">\r\n                <template slot-scope=\"props\">\r\n                    <el-form label-position=\"left\" inline class=\"demo-table-expand\">\r\n                        <el-row>\r\n                            <el-col :span=\"12\">\r\n                                <el-form-item label=\"房源标题：\">\r\n                                    <span>{{ props.row.title }}</span>\r\n                                </el-form-item>\r\n                                <el-divider></el-divider>\r\n                                <el-form-item label=\"房源户型：\">\r\n                                    <span>{{ props.row.style }}</span>\r\n                                </el-form-item>\r\n                                <el-divider></el-divider>\r\n                                <el-form-item label=\"房源楼层：\">\r\n                                    <span>{{ props.row.floor }}</span>\r\n                                </el-form-item>\r\n                                <el-divider></el-divider>\r\n                            </el-col>\r\n                            <el-col :span=\"12\">\r\n                                <el-form-item label=\"租金：\">\r\n                                    <span>{{ props.row.rent }}</span>\r\n                                </el-form-item>\r\n                                <el-divider></el-divider>\r\n                                <el-form-item label=\"联系人：\">\r\n                                    <span>{{ props.row.host }}</span>\r\n                                </el-form-item>\r\n                                <el-divider></el-divider>\r\n                                <el-form-item label=\"联系方式：\">\r\n                                    <span>{{ props.row.phone }}</span>\r\n                                </el-form-item>\r\n                                <el-divider></el-divider>\r\n                            </el-col>\r\n                        </el-row>\r\n                        <el-form-item label=\"房源描述：\">\r\n                            <span>{{ props.row.desc }}</span>\r\n                        </el-form-item>\r\n                        <el-divider></el-divider>\r\n                        <el-form-item label=\"房源图片：\">\r\n                            <div class=\"demo-image__preview\">\r\n                                <el-image v-if=\"props.row.pic\" v-for=\"item in props.row.pic\" :key=\"item\" :src=\"item\"\r\n                                    fit=\"contain\" :style=\"{ width: '200px', height: '150px' }\"></el-image>\r\n                            </div>\r\n                        </el-form-item>\r\n                    </el-form>\r\n                </template>\r\n            </el-table-column>\r\n\r\n            <el-table-column prop=\"code\" label=\"房源编号\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"style\" label=\"户型\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"address\" label=\"位置\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"floor\" label=\"楼层\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"rent\" label=\"租金\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"status\" label=\"房源状态\" width=\"80\">\r\n                <!-- <template #default=\"{ row }\">\r\n                    {{ row.status == 1 ? '启用' : '禁用' }}\r\n                </template> -->\r\n            </el-table-column>\r\n            <el-table-column fixed=\"right\" label=\"操作\" width=\"180\">\r\n                <template #default=\"{ row }\">\r\n                    <div class=\"button-container\">\r\n                        <el-switch style=\"display: block; font-size: 8px\" v-model=\"row.state\" active-color=\"#13ce66\"\r\n                            inactive-color=\"#ff4949\" width=\"30\" active-text=\"上架\" inactive-text=\"下架\"\r\n                            @change=\"handleSwitchChange(row)\">\r\n                            <span v-if=\"row.state === 1\">上架</span>\r\n                            <span v-else>下架</span>\r\n                        </el-switch>\r\n                        <el-button @click=\"edit(row)\" type=\"text\" size=\"small\" class=\"el-icon-edit\">编辑</el-button>\r\n                    </div>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <div class=\"page-box\">\r\n            <el-pagination @current-change=\"pagechange\" background layout=\"prev, pager, next\" :total=\"total\"\r\n                :page-size=\"pagesize\">\r\n            </el-pagination>\r\n        </div>\r\n\r\n    </el-card>\r\n</template>\r\n\r\n<script>\r\n\r\nimport axios from 'axios';\r\nexport default {\r\n    data() {\r\n        return {\r\n            srcList: [],\r\n            list: [],\r\n            pagenum: 1,\r\n            pagesize: 5,\r\n            total: 0,\r\n\r\n            options: [],\r\n            options1: [],\r\n            value1: '',\r\n            value: '',\r\n            value2: true,\r\n            dialogFormVisible: false,\r\n\r\n            houseFormData: {\r\n                code: '',\r\n                style: '',\r\n                address: '',\r\n                floor: '',\r\n                rent: '',\r\n                status: '',\r\n                state: ''\r\n            },\r\n            actionType: '',\r\n            id: ''\r\n        };\r\n    },\r\n\r\n    async created() {\r\n        // 获取房源列表数据\r\n        this.getList();\r\n        // 获取户型选项数据\r\n        this.getOptions();\r\n        //获取租金选项数据\r\n        this.getOptions1();\r\n    },\r\n\r\n\r\n    methods: {\r\n        // 获取房源列表数据\r\n        async getList() {\r\n            const res = await axios({\r\n                url: 'http://localhost:3000/house',\r\n                method: 'get',\r\n                params: {\r\n                    pagenum: this.pagenum,\r\n                    pagesize: this.pagesize,\r\n                },\r\n            });\r\n            this.list = res.data.data.list;\r\n            this.total = res.data.data.total;\r\n        },\r\n        // 获取户型选项数据\r\n        async getOptions() {\r\n            const res = await axios({\r\n                url: 'http://localhost:3000/style',\r\n                method: 'get',\r\n            });\r\n            console.log(res)\r\n            this.options = res.data.data.list\r\n\r\n        },\r\n        //获取租金选项数据\r\n        async getOptions1() {\r\n            const res = await axios({\r\n                url: 'http://localhost:3000/valu',\r\n                method: 'get',\r\n            });\r\n            console.log(res)\r\n            this.options1 = res.data.data.list\r\n\r\n        },\r\n        //页码\r\n        async pagechange(pagenum) {\r\n            console.log(`页码改变了:${pagenum}`);\r\n            this.pagenum = pagenum\r\n            const res = await axios({\r\n                url: \"http://localhost:3000/house\",\r\n                method: 'get',\r\n                params: {\r\n                    pagenum: this.pagenum,\r\n                    pagesize: this.pagesize\r\n                },\r\n            });\r\n            this.list = res.data.data.list;\r\n            this.total = res.data.data.total;\r\n        },\r\n\r\n        //搜索\r\n        async search() {\r\n            console.log(this.params.address, this.params.style, this.params.rent)\r\n            //对户型进行搜索\r\n            const selectedOption = this.options.find((option) => option.id === this.params.style);\r\n            if (selectedOption) {\r\n                this.params.style = selectedOption.id;\r\n            }\r\n            //对租金区间进行搜索\r\n            const selectedOption1 = this.options1.find((option1) => option1.id === this.params.rent);\r\n            if (selectedOption1) {\r\n                this.params.rent = selectedOption1.id;\r\n            }\r\n            const res = await axios({\r\n                url: \"http://localhost:3000/house\",\r\n                method: \"get\",\r\n                params: {\r\n                    pagenum: this.pagenum,\r\n                    pagesize: this.pagesize,\r\n                    ...this.params\r\n                }\r\n            })\r\n            this.list = res.data.data.list;\r\n            this.total = res.data.data.total;\r\n        },\r\n\r\n        //编辑\r\n        edit(row) {\r\n            this.dialogFormVisible = true;\r\n            console.log(row)\r\n            this.houseFormData.code = row.code\r\n            this.houseFormData.style = row.style\r\n            this.houseFormData.address = row.address\r\n            this.houseFormData.floor = row.floor\r\n            this.houseFormData.rent = row.rent\r\n            this.houseFormData.status = row.value2 ? '已租' : '待租'\r\n            this.id = row.id\r\n            this.actionType = 'edit'\r\n        },\r\n        handleChange(value) {\r\n            this.value2 = value;\r\n        },\r\n        //新增\r\n        add() {\r\n            this.$router.push('/source/add')\r\n        },\r\n        async submit(id) {\r\n            // 拷贝userFormData到data\r\n            const data = { ...this.houseFormData }\r\n            // 修改的时候需要把id带过去\r\n            if (this.actionType === 'edit') {\r\n                data.id = this.id\r\n            }\r\n            data.status = this.value2 ? '已租' : '待租';\r\n\r\n            const selectedOption = this.options.find((option) => option.id === this.value);\r\n            if (selectedOption) {\r\n                data.style = selectedOption.style;\r\n            }\r\n\r\n            const res = await axios({\r\n                url: 'http://localhost:3000/house',\r\n                method: 'post',\r\n                data: data\r\n            })\r\n            const updatedItem = this.list.find(item => item.id === this.id);\r\n            if (updatedItem) {\r\n                updatedItem.code = data.code;\r\n                updatedItem.style = data.style;\r\n                updatedItem.floor = data.floor\r\n                updatedItem.address = data.address;\r\n                updatedItem.rent = data.rent;\r\n                updatedItem.status = data.status;\r\n            }\r\n\r\n            // 更新houseFormData对象\r\n            this.houseFormData = { ...data };\r\n\r\n            // 关闭弹窗\r\n            this.dialogFormVisible = false;\r\n        },\r\n        //改变上架下架状态值\r\n        async handleSwitchChange(row) {\r\n            // 拷贝userFormData到data\r\n            const data = {\r\n                id: row.id,\r\n                state: row.state === true ? 1 : 0\r\n            }\r\n\r\n            const res = await axios({\r\n                url: 'http://localhost:3000/house',\r\n                method: 'post',\r\n                data: data\r\n            })\r\n            const updatedItem = this.list.find(item => item.id === row.id);\r\n            if (updatedItem) {\r\n                updatedItem.state = row.state;\r\n            }\r\n            // 更新houseFormData对象\r\n            this.houseFormData = { ...data };\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}