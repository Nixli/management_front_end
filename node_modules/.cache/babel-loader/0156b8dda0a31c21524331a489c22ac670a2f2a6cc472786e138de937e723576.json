{"ast":null,"code":"import axios from \"axios\";\nimport * as echarts from \"echarts\";\nexport default {\n  data() {\n    return {\n      //图表\n      chart: null,\n      //小类菜名\n      nameList: [],\n      //销量\n      countList: [],\n      //大类菜名\n      dishIDList: '',\n      // 搜索条件\n      params: {\n        //storeId: 1,\n        //大类ID\n        dishID: undefined,\n        times: undefined\n      },\n      //时间\n      pickerOptions: {\n        shortcuts: [{\n          text: '最近一周',\n          onClick(picker) {\n            const end = new Date();\n            const start = new Date();\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\n            picker.$emit('pick', [start, end]);\n          }\n        }, {\n          text: '最近一个月',\n          onClick(picker) {\n            const end = new Date();\n            const start = new Date();\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\n            picker.$emit('pick', [start, end]);\n          }\n        }, {\n          text: '最近三个月',\n          onClick(picker) {\n            const end = new Date();\n            const start = new Date();\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\n            picker.$emit('pick', [start, end]);\n          }\n        }]\n      }\n    };\n  },\n  mounted() {//最早获取DOM元素的生命周期函数，挂载完毕\n    // this.$nextTick(() => {\n    //   this.initChart()\n    // })\n  },\n  created() {\n    //获取大类集合\n    this.getDishIDList();\n  },\n  methods: {\n    setOption() {\n      // 初始化echarts实例\n      this.chart = echarts.init(document.getElementById(\"chart\"));\n      this.chart.setOption({\n        title: {\n          text: '菜品销量统计'\n        },\n        tooltip: {\n          trigger: 'item' // 当鼠标悬浮在坐标轴上时触发\n        },\n        xAxis: {\n          type: \"category\",\n          data: this.nameList\n        },\n        yAxis: {\n          type: \"value\"\n        },\n        series: [{\n          name: this.nameList,\n          data: this.countList,\n          type: \"bar\"\n        }]\n      });\n    },\n    // open(msg) {\n    //     this.$message({\n    //       message: msg,\n    //       type: 'success'\n    //     });\n    //   },\n\n    //查询该门店的所有菜品大类\n    async getDishIDList() {\n      const res = await axios({\n        method: \"get\",\n        url: \"http://localhost:8080/dish/findDishByStoreID\",\n        params: {\n          storeId: 1\n        }\n      });\n      console.log(res.data.data);\n      this.dishIDList = res.data.data;\n    },\n    //查询小类名字\n    async getNameList() {\n      const res = await axios({\n        method: \"post\",\n        url: \"http://localhost:8080/dishes/getDishesNameList\",\n        params: {\n          ...this.params,\n          storeId: 1\n        }\n      });\n      console.log(res);\n      this.nameList = res.data.data;\n      if (this.nameList == null) {\n        this.$notify.info({\n          title: '消息',\n          message: '该菜系暂未售出'\n        });\n      } else {\n        this.$notify({\n          title: '成功',\n          message: '查询成功',\n          type: 'success'\n        });\n      }\n      //在渲染 图形\n      this.$nextTick(() => {\n        this.setOption();\n      });\n    },\n    //查询小类销量\n    async getCountList() {\n      const res = await axios({\n        method: \"post\",\n        url: \"http://localhost:8080/dishes/getDishesCountList\",\n        params: {\n          ...this.params,\n          storeId: 1\n        }\n      });\n      console.log(res);\n      this.countList = res.data.data;\n      //在渲染 图形\n      this.$nextTick(() => {\n        this.setOption();\n      });\n    },\n    // 点击搜索\n    search() {\n      this.getNameList();\n      this.getCountList();\n    }\n  }\n  // mounted() {\n  //   // 初始化echarts实例\n  //   this.chart = echarts.init(document.getElementById(\"chart\"));\n  //   // 设置echarts配置项\n  //   setTimeout(() => {\n  //      console.log(\"===\");\n  //     console.log(this.nameList);\n  //     console.log(this.countList);\n  //     console.log(this.dishIDList);\n  //   //   const option = {\n  //       this.chart.setOption({\n  //       xAxis: {\n  //         type: \"category\",\n  //         data: this.nameList,\n  //       },\n  //       yAxis: {\n  //         type: \"value\",\n  //       },\n  //       series: [\n  //         {\n  //           data: this.countList,\n  //           type: \"bar\",\n  //         },\n  //       ],\n  //     });\n  //   }, 2000);\n  //   // 使用配置项绘制图表\n  //   // option && this.chart.setOption(option);\n  // },\n};","map":{"version":3,"names":["axios","echarts","data","chart","nameList","countList","dishIDList","params","dishID","undefined","times","pickerOptions","shortcuts","text","onClick","picker","end","Date","start","setTime","getTime","$emit","mounted","created","getDishIDList","methods","setOption","init","document","getElementById","title","tooltip","trigger","xAxis","type","yAxis","series","name","res","method","url","storeId","console","log","getNameList","$notify","info","message","$nextTick","getCountList","search"],"sources":["src/views/dishSales/dishSales.vue"],"sourcesContent":["<template>\r\n  <div style=\"height: auto; width: auto\">\r\n    <el-card>\r\n      <div style=\"display: flex; flex-direction: row\">\r\n        <!-- 搜索区域 -->\r\n        <el-form :inline=\"true\">\r\n          <!-- 菜系下拉列表框 -->\r\n          <el-form-item label=\"菜系\">\r\n            <el-select v-model=\"params.dishID\" class=\"filter-item\" placeholder=\"请选择菜系\">\r\n              <el-option v-for=\"(dish, index) in dishIDList\" :label=\"dish.dishType\" :value=\"dish.dishID\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n\r\n          <!-- 时间 -->\r\n          <el-date-picker style=\"margin-top: 1px;\" v-model=\"params.times\" type=\"datetimerange\" :picker-options=\"pickerOptions\"\r\n                    range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\" align=\"right\">\r\n                </el-date-picker>\r\n\r\n          <!-- 搜索按钮 -->\r\n          <el-form-item>\r\n            <el-button @click=\"search\" type=\"primary\" icon=\"el-icon-search\">搜索</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 图形区域 -->\r\n    <el-card>\r\n      <div id=\"chart\" style=\"width: 600px; height: 400px\"></div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport * as echarts from \"echarts\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      //图表\r\n      chart: null,\r\n      //小类菜名\r\n      nameList: [],\r\n      //销量\r\n      countList: [],\r\n      //大类菜名\r\n      dishIDList: '',\r\n      // 搜索条件\r\n      params: {\r\n        //storeId: 1,\r\n        //大类ID\r\n        dishID:undefined,\r\n        times: undefined,\r\n      },\r\n      //时间\r\n        pickerOptions: {\r\n          shortcuts: [{\r\n            text: '最近一周',\r\n            onClick(picker) {\r\n              const end = new Date();\r\n              const start = new Date();\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\r\n              picker.$emit('pick', [start, end]);\r\n            }\r\n          }, {\r\n            text: '最近一个月',\r\n            onClick(picker) {\r\n              const end = new Date();\r\n              const start = new Date();\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\r\n              picker.$emit('pick', [start, end]);\r\n            }\r\n          }, {\r\n            text: '最近三个月',\r\n            onClick(picker) {\r\n              const end = new Date();\r\n              const start = new Date();\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\r\n              picker.$emit('pick', [start, end]);\r\n            }\r\n          }]\r\n        },\r\n    };\r\n  },\r\n  mounted() { //最早获取DOM元素的生命周期函数，挂载完毕\r\n    // this.$nextTick(() => {\r\n    //   this.initChart()\r\n    // })\r\n  },\r\n  created() {\r\n    //获取大类集合\r\n    this.getDishIDList();\r\n  },\r\n  methods: {\r\n     setOption(){\r\n        // 初始化echarts实例\r\n        this.chart = echarts.init(document.getElementById(\"chart\"));\r\n        this.chart.setOption({\r\n          title: {\r\n              text: '菜品销量统计'\r\n          },\r\n          tooltip: {\r\n              trigger: 'item' // 当鼠标悬浮在坐标轴上时触发\r\n          },\r\n          xAxis: {\r\n            type: \"category\",\r\n            data: this.nameList,\r\n          },\r\n          yAxis: {\r\n            type: \"value\",\r\n          },\r\n          series: [\r\n            {\r\n              name:this.nameList,\r\n              data: this.countList,\r\n              type: \"bar\",\r\n            },\r\n          ],\r\n        });\r\n     },\r\n    // open(msg) {\r\n    //     this.$message({\r\n    //       message: msg,\r\n    //       type: 'success'\r\n    //     });\r\n    //   },\r\n\r\n    //查询该门店的所有菜品大类\r\n   async getDishIDList(){\r\n      const res = await axios({\r\n        method: \"get\",\r\n        url: \"http://localhost:8080/dish/findDishByStoreID\",\r\n        params: {\r\n          storeId: 1,\r\n        },\r\n      });\r\n      console.log(res.data.data);\r\n      this.dishIDList = res.data.data;\r\n    },\r\n\r\n    //查询小类名字\r\n    async getNameList(){\r\n      const res = await axios({\r\n        method: \"post\",\r\n        url: \"http://localhost:8080/dishes/getDishesNameList\",\r\n        params: {\r\n           ...this.params,\r\n          storeId: 1,\r\n        },\r\n      });\r\n      console.log(res);\r\n      this.nameList = res.data.data;\r\n      if(this.nameList==null){\r\n        this.$notify.info({\r\n          title: '消息',\r\n          message: '该菜系暂未售出'\r\n        });\r\n      }else{\r\n        this.$notify({\r\n          title: '成功',\r\n          message: '查询成功',\r\n          type: 'success'\r\n        });\r\n      }\r\n      //在渲染 图形\r\n      this.$nextTick(() => {\r\n        this.setOption();\r\n      })\r\n    },\r\n\r\n    //查询小类销量\r\n    async getCountList(){\r\n      const res = await axios({\r\n        method: \"post\",\r\n        url: \"http://localhost:8080/dishes/getDishesCountList\",\r\n        params: {\r\n           ...this.params,\r\n          storeId: 1,\r\n        },\r\n      });\r\n      console.log(res);\r\n      this.countList = res.data.data;\r\n      //在渲染 图形\r\n      this.$nextTick(() => {\r\n         this.setOption();\r\n      })\r\n    },\r\n\r\n    // 点击搜索\r\n    search() {\r\n      this.getNameList();\r\n      this.getCountList();\r\n    },\r\n  },\r\n  // mounted() {\r\n  //   // 初始化echarts实例\r\n  //   this.chart = echarts.init(document.getElementById(\"chart\"));\r\n  //   // 设置echarts配置项\r\n  //   setTimeout(() => {\r\n  //      console.log(\"===\");\r\n  //     console.log(this.nameList);\r\n  //     console.log(this.countList);\r\n  //     console.log(this.dishIDList);\r\n  //   //   const option = {\r\n  //       this.chart.setOption({\r\n  //       xAxis: {\r\n  //         type: \"category\",\r\n  //         data: this.nameList,\r\n  //       },\r\n  //       yAxis: {\r\n  //         type: \"value\",\r\n  //       },\r\n  //       series: [\r\n  //         {\r\n  //           data: this.countList,\r\n  //           type: \"bar\",\r\n  //         },\r\n  //       ],\r\n  //     });\r\n  //   }, 2000);\r\n  //   // 使用配置项绘制图表\r\n  //   // option && this.chart.setOption(option);\r\n  // },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.row-box {\r\n  width: 100%;\r\n  display: flex;\r\n  margin-top: 20px;\r\n  margin-bottom: 8px;\r\n  justify-content: center;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}